<script src="{{ static('js/jquery/jquery.min.js') }}"></script>
<script src="{{ static('js/vendors/sfdc/canvas-all.js') }}"></script>
<script type="text/javascript">
  $(function(){
     Sfdc.canvas(function() {

    // Parse the signed request.
    var sr = JSON.parse('{{canvasRequestJSON|safe}}');
    // Save the token
    Sfdc.canvas.oauth.token(sr.oauthToken);
    console.log(Sfdc, sr);
    sessionId = sr.oauthToken;
     $.ajax({
           url: 'https://na15.salesforce.com/services/data/v27.0/',
           beforeSend: function (request)
           {
           request.setRequestHeader("Authorization", 'Bearer '+sessionId );
           }, dataType: 'json'
           }).done(function(res){
                   console.log(api_contacted);
                   console.log('success',res);
            }).fail(function(res){
             console.log('fail',res);
             });
    });
    // // attach event
    // $('.callSFMethod').click(function(ev){

    //   // build message data
    //   var messageData = {}
    //   messageData['method'] = 'alert'
    //   messageData['content'] = $(ev.srcElement).data('values')

    //   // post message
    //   parent.window.postMessage(
    //     JSON.stringify(messageData),
    //     sr.client.targetOrigin
    //   )
    // });

    });
  })
    
</script>
